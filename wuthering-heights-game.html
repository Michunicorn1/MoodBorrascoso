<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wuthering Heights Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #2C3E50 0%, #4A5568 50%, #1A202C 100%);
            overflow: hidden;
            user-select: none;
        }

        #gameContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        #gameCanvas {
            background: linear-gradient(to bottom, #34495E 0%, #5D6D7E 50%, #85929E 100%);
            display: block;
            border: 3px solid #1C2833;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #ECF0F1;
            font-size: 18px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            z-index: 100;
            background: rgba(28,40,51,0.8);
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #7F8C8D;
        }

        #instructions {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(28,40,51,0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 0 30px rgba(127,140,141,0.5);
            z-index: 1000;
            max-width: 600px;
            border: 3px solid #7F8C8D;
        }

        #instructions h1 {
            color: #ECF0F1;
            margin-bottom: 20px;
            font-size: 32px;
            font-family: 'Georgia', serif;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        #instructions p {
            margin-bottom: 15px;
            color: #BDC3C7;
            font-size: 16px;
            line-height: 1.4;
        }

        #startButton {
            background: linear-gradient(45deg, #5D6D7E, #34495E);
            color: #ECF0F1;
            border: 2px solid #7F8C8D;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.3s;
            font-family: 'Georgia', serif;
            font-weight: bold;
        }

        #startButton:hover {
            transform: scale(1.05);
            background: linear-gradient(45deg, #34495E, #2C3E50);
        }

        #victoryMessage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #2C3E50, #34495E);
            color: #ECF0F1;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 0 40px rgba(127,140,141,0.8);
            z-index: 1000;
            display: none;
            animation: windyEffect 3s infinite;
            border: 3px solid #7F8C8D;
        }

        @keyframes windyEffect {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg); }
            25% { transform: translate(-48%, -50%) rotate(-1deg); }
            75% { transform: translate(-52%, -50%) rotate(1deg); }
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .control-btn {
            background: rgba(28,40,51,0.9);
            border: 2px solid #7F8C8D;
            border-radius: 15px;
            padding: 15px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            color: #ECF0F1;
            font-weight: bold;
        }

        .control-btn:hover {
            background: rgba(52,73,94,0.9);
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .controls {
                bottom: 10px;
            }
            .control-btn {
                padding: 12px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <div id="ui">
            <div>üìö Palabras & Recuerdos: <span id="score">0</span>/20</div>
            <div>üíú Vidas: <span id="lives">3</span></div>
            <div>‚åõ Tiempo: <span id="time">0</span>s</div>
        </div>

        <div id="instructions">
            <h1>üå¨Ô∏è Wuthering Heights Adventure üå¨Ô∏è</h1>
            <p>¬°Explora los p√°ramos tormentosos de Cumbres Borrascosas!</p>
            <p>üéÆ Controles:</p>
            <p>‚Üê ‚Üí Moverse | ‚Üë Saltar | Espacio Saltar</p>
            <p>üìñ Recolecta palabras del mundo de Emily Bront√´:</p>
            <p><em>HEATHCLIFF, CATHERINE, EARNSHAW, LINTON, MOORS, TEMPEST, PASSION, REVENGE, GHOST, HAUNTED, Yorkshire, NELLY, EDGAR, ISABELLA, LOCKWOOD, THRUSHCROSS, HARETON, HINDLEY, WILDNESS, ETERNAL</em></p>
            <button id="startButton">¬°Comenzar la Aventura en los P√°ramos!</button>
        </div>

        <div id="victoryMessage">
            üå™Ô∏è ¬°PASI√ìN INMORTAL! üå™Ô∏è<br>
            ¬°Has capturado la esencia de los p√°ramos!<br>
            <em>"Whatever our souls are made of, they are the same"</em>
        </div>

        <div class="controls">
            <button class="control-btn" id="leftBtn">‚Üê</button>
            <button class="control-btn" id="jumpBtn">‚Üë</button>
            <button class="control-btn" id="rightBtn">‚Üí</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const game = {
            started: false,
            startTime: Date.now(),
            score: 0,
            lives: 3,
            gravity: 0.5,
            platforms: [],
            collectibles: [],
            enemies: [],
            particles: [],
            windOffset: 0
        };

        const moorWords = [
            'HEATHCLIFF', 'CATHERINE', 'EARNSHAW', 'LINTON', 'MOORS',
            'TEMPEST', 'PASSION', 'REVENGE', 'GHOST', 'HAUNTED',
            'YORKSHIRE', 'NELLY', 'EDGAR', 'ISABELLA', 'LOCKWOOD',
            'THRUSHCROSS', 'HARETON', 'HINDLEY', 'WILDNESS', 'ETERNAL'
        ];

        const player = {
            x: 100,
            y: 400,
            width: 35,
            height: 40,
            vx: 0,
            vy: 0,
            speed: 5,
            jumpPower: 15,
            onGround: false,
            color: '#2C3E50'
        };

        const keys = {};
        
        document.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });
        
        document.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });

        document.getElementById('leftBtn').addEventListener('touchstart', () => keys['ArrowLeft'] = true);
        document.getElementById('leftBtn').addEventListener('touchend', () => keys['ArrowLeft'] = false);
        document.getElementById('rightBtn').addEventListener('touchstart', () => keys['ArrowRight'] = true);
        document.getElementById('rightBtn').addEventListener('touchend', () => keys['ArrowRight'] = false);
        document.getElementById('jumpBtn').addEventListener('touchstart', () => keys['ArrowUp'] = true);
        document.getElementById('jumpBtn').addEventListener('touchend', () => keys['ArrowUp'] = false);

        document.addEventListener('touchmove', (e) => e.preventDefault(), {passive: false});

        function generatePlatforms() {
            game.platforms = [];
            
            game.platforms.push({
                x: 0,
                y: canvas.height - 50,
                width: canvas.width,
                height: 50,
                color: '#566573'
            });

            for (let i = 0; i < 15; i++) {
                game.platforms.push({
                    x: Math.random() * (canvas.width - 200),
                    y: Math.random() * (canvas.height - 200) + 100,
                    width: 150 + Math.random() * 100,
                    height: 20,
                    color: i % 3 === 0 ? '#34495E' : i % 3 === 1 ? '#5D6D7E' : '#7F8C8D'
                });
            }
        }

        function generateCollectibles() {
            game.collectibles = [];
            
            moorWords.forEach((word, index) => {
                const platform = game.platforms[Math.floor(Math.random() * game.platforms.length)];
                const isBook = index % 4 === 0;
                
                game.collectibles.push({
                    x: platform.x + Math.random() * (platform.width - 80),
                    y: platform.y - 35,
                    width: isBook ? 40 : Math.max(60, word.length * 8),
                    height: isBook ? 30 : 25,
                    word: word,
                    isBook: isBook,
                    color: isBook ? '#1C2833' : `hsl(${200 + index * 8}, 40%, 50%)`,
                    bounce: Math.random() * Math.PI,
                    sparkle: 0
                });
            });
        }

        function generateEnemies() {
            game.enemies = [];
            
            for (let i = 0; i < 4; i++) {
                const platform = game.platforms[Math.floor(Math.random() * (game.platforms.length - 1)) + 1];
                game.enemies.push({
                    x: platform.x + Math.random() * (platform.width - 35),
                    y: platform.y - 35,
                    width: 30,
                    height: 30,
                    vx: (Math.random() - 0.5) * 2,
                    color: '#17202A',
                    platform: platform
                });
            }
        }

        function drawPlayer() {
            ctx.fillStyle = '#2C3E50';
            ctx.fillRect(player.x, player.y + 15, player.width, player.height - 15);
            
            ctx.fillStyle = '#D5DBDB';
            ctx.fillRect(player.x + 8, player.y, 20, 18);
            
            ctx.fillStyle = '#1C2833';
            ctx.fillRect(player.x + 5, player.y - 2, 25, 8);
            
            ctx.fillStyle = 'white';
            ctx.fillRect(player.x + 10, player.y + 6, 5, 5);
            ctx.fillRect(player.x + 20, player.y + 6, 5, 5);
            
            ctx.fillStyle = '#5D6D7E';
            ctx.fillRect(player.x + 12, player.y + 8, 2, 2);
            ctx.fillRect(player.x + 22, player.y + 8, 2, 2);
            
            ctx.fillStyle = '#7F8C8D';
            ctx.fillRect(player.x + 14, player.y + 13, 7, 2);
            
            ctx.fillStyle = '#D5DBDB';
            ctx.fillRect(player.x - 2, player.y + 18, 6, 12);
            ctx.fillRect(player.x + 31, player.y + 18, 6, 12);
        }

        function drawPlatforms() {
            game.platforms.forEach((platform, index) => {
                ctx.fillStyle = platform.color;
                ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                
                if (index === 0) {
                    ctx.fillStyle = '#85929E';
                    ctx.fillRect(platform.x, platform.y, platform.width, 8);
                    
                    for (let i = 0; i < platform.width; i += 60) {
                        ctx.fillStyle = '#566573';
                        ctx.fillRect(platform.x + i, platform.y - 8, 2, 8);
                        ctx.fillRect(platform.x + i + 20, platform.y - 12, 2, 12);
                    }
                } else {
                    if (platform.color === '#34495E') {
                        ctx.fillStyle = '#1C2833';
                        for (let i = 10; i < platform.width - 10; i += 30) {
                            ctx.fillRect(platform.x + i, platform.y + 5, 3, 3);
                        }
                    }
                }
            });
        }

        function drawCollectibles() {
            game.collectibles.forEach(item => {
                item.bounce += 0.1;
                item.sparkle += 0.2;
                const bounceY = item.y + Math.sin(item.bounce) * 3;
                
                if (item.isBook) {
                    ctx.fillStyle = item.color;
                    ctx.fillRect(item.x, bounceY, item.width, item.height);
                    
                    ctx.fillStyle = '#D5DBDB';
                    ctx.fillRect(item.x + 2, bounceY + 2, item.width - 6, item.height - 4);
                    
                    ctx.strokeStyle = '#1C2833';
                    ctx.lineWidth = 1;
                    for (let i = 0; i < 4; i++) {
                        ctx.beginPath();
                        ctx.moveTo(item.x + 4, bounceY + 6 + i * 4);
                        ctx.lineTo(item.x + item.width - 4, bounceY + 6 + i * 4);
                        ctx.stroke();
                    }
                    
                    ctx.fillStyle = `rgba(127, 140, 141, ${0.3 + Math.sin(item.sparkle) * 0.3})`;
                    ctx.fillRect(item.x - 2, bounceY - 2, item.width + 4, item.height + 4);
                } else {
                    ctx.fillStyle = item.color;
                    ctx.fillRect(item.x, bounceY, item.width, item.height);
                    
                    ctx.strokeStyle = '#ECF0F1';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(item.x, bounceY, item.width, item.height);
                    
                    ctx.fillStyle = '#ECF0F1';
                    ctx.font = 'bold 10px Georgia';
                    ctx.textAlign = 'center';
                    ctx.fillText(item.word, item.x + item.width/2, bounceY + item.height/2 + 3);
                    
                    const sparkleSize = 2 + Math.sin(item.sparkle) * 1;
                    ctx.fillStyle = `rgba(236, 240, 241, ${0.5 + Math.sin(item.sparkle * 2) * 0.5})`;
                    ctx.fillRect(item.x - sparkleSize, bounceY - sparkleSize, sparkleSize * 2, sparkleSize * 2);
                    ctx.fillRect(item.x + item.width + sparkleSize/2, bounceY + item.height/2, sparkleSize, sparkleSize);
                }
            });
        }

        function drawEnemies() {
            game.enemies.forEach(enemy => {
                ctx.fillStyle = enemy.color;
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
                
                ctx.fillStyle = '#000000';
                ctx.fillRect(enemy.x + 2, enemy.y - 8, enemy.width - 4, 8);
                
                ctx.fillStyle = '#7F8C8D';
                ctx.fillRect(enemy.x + 8, enemy.y + 8, 3, 3);
                ctx.fillRect(enemy.x + 19, enemy.y + 8, 3, 3);
                
                ctx.strokeStyle = '#566573';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(enemy.x + 8, enemy.y + 18);
                ctx.lineTo(enemy.x + 22, enemy.y + 18);
                ctx.stroke();
            });
        }

        function createParticles(x, y, color) {
            for (let i = 0; i < 15; i++) {
                game.particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 8,
                    vy: Math.random() * -6,
                    color: i % 2 === 0 ? color : '#7F8C8D',
                    life: 40,
                    size: Math.random() * 4 + 2
                });
            }
        }

        function drawParticles() {
            game.particles.forEach((particle, index) => {
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.vy += 0.1;
                particle.life--;
                
                if (particle.life <= 0) {
                    game.particles.splice(index, 1);
                    return;
                }
                
                ctx.fillStyle = particle.color;
                ctx.globalAlpha = particle.life / 40;
                
                ctx.save();
                ctx.translate(particle.x, particle.y);
                ctx.rotate(particle.life * 0.1);
                ctx.fillRect(-particle.size/2, -particle.size/2, particle.size, particle.size);
                ctx.fillRect(-particle.size/4, -particle.size, particle.size/2, particle.size * 2);
                ctx.restore();
                
                ctx.globalAlpha = 1;
            });
        }

        function checkCollisions() {
            player.onGround = false;
            game.platforms.forEach(platform => {
                if (player.x < platform.x + platform.width &&
                    player.x + player.width > platform.x &&
                    player.y < platform.y + platform.height &&
                    player.y + player.height > platform.y) {
                    
                    if (player.vy > 0) {
                        player.y = platform.y - player.height;
                        player.vy = 0;
                        player.onGround = true;
                    }
                }
            });

            game.collectibles.forEach((item, index) => {
                if (player.x < item.x + item.width &&
                    player.x + player.width > item.x &&
                    player.y < item.y + item.height &&
                    player.y + player.height > item.y) {
                    
                    createParticles(item.x + item.width/2, item.y + item.height/2, item.color);
                    game.collectibles.splice(index, 1);
                    game.score++;
                    
                    if (game.score >= moorWords.length) {
                        document.getElementById('victoryMessage').style.display = 'block';
                    }
                }
            });

            game.enemies.forEach(enemy => {
                if (player.x < enemy.x + enemy.width &&
                    player.x + player.width > enemy.x &&
                    player.y < enemy.y + enemy.height &&
                    player.y + player.height > enemy.y) {
                    
                    createParticles(player.x + player.width/2, player.y + player.height/2, '#7F8C8D');
                    game.lives--;
                    
                    if (game.lives <= 0) {
                        resetGame();
                    } else {
                        player.x = 100;
                        player.y = 400;
                        player.vx = 0;
                        player.vy = 0;
                    }
                }
            });
        }

        function updateEnemies() {
            game.enemies.forEach(enemy => {
                enemy.x += enemy.vx;
                
                if (enemy.x <= enemy.platform.x || enemy.x + enemy.width >= enemy.platform.x + enemy.platform.width) {
                    enemy.vx = -enemy.vx;
                }
            });
        }

        function updateGame() {
            if (!game.started) return;

            if (keys['ArrowLeft'] || keys['a']) {
                player.vx = -player.speed;
            } else if (keys['ArrowRight'] || keys['d']) {
                player.vx = player.speed;
            } else {
                player.vx *= 0.8;
            }

            if ((keys['ArrowUp'] || keys['w'] || keys[' ']) && player.onGround) {
                player.vy = -player.jumpPower;
                player.onGround = false;
            }

            player.x += player.vx;
            player.y += player.vy;
            player.vy += game.gravity;

            if (player.x < 0) player.x = 0;
            if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
            if (player.y > canvas.height) {
                game.lives--;
                if (game.lives <= 0) {
                    resetGame();
                } else {
                    player.x = 100;
                    player.y = 400;
                    player.vx = 0;
                    player.vy = 0;
                }
            }

            updateEnemies();
            checkCollisions();
            updateUI();
        }

        function updateUI() {
            document.getElementById('score').textContent = game.score;
            document.getElementById('lives').textContent = game.lives;
            document.getElementById('time').textContent = Math.floor((Date.now() - game.startTime) / 1000);
        }

        function resetGame() {
            game.started = false;
            game.score = 0;
            game.lives = 3;
            game.startTime = Date.now();
            player.x = 100;
            player.y = 400;
            player.vx = 0;
            player.vy = 0;
            document.getElementById('instructions').style.display = 'block';
            document.getElementById('victoryMessage').style.display = 'none';
            generatePlatforms();
            generateCollectibles();
            generateEnemies();
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            game.windOffset += 0.02;
            
            ctx.fillStyle = 'rgba(189, 195, 199, 0.3)';
            for (let i = 0; i < 5; i++) {
                const windX = Math.sin(game.windOffset + i * 0.5) * 30;
                ctx.beginPath();
                ctx.arc(100 + i * 220 + windX, 80, 40, 0, Math.PI * 2);
                ctx.arc(130 + i * 220 + windX, 75, 50, 0, Math.PI * 2);
                ctx.arc(160 + i * 220 + windX, 80, 40, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.fillStyle = 'rgba(127, 140, 141, 0.2)';
            for (let i = 0; i < 12; i++) {
                const x = 50 + i * 100;
                const y = 40 + Math.sin(game.windOffset * 2 + i) * 15;
                ctx.fillRect(x, y, 2, 20);
            }
            
            if (game.started) {
                drawPlatforms();
                drawCollectibles();
                drawEnemies();
                drawPlayer();
                drawParticles();
                updateGame();
            }
            
            requestAnimationFrame(gameLoop);
        }

        document.getElementById('startButton').addEventListener('click', () => {
            game.started = true;
            game.startTime = Date.now();
            document.getElementById('instructions').style.display = 'none';
            generatePlatforms();
            generateCollectibles();
            generateEnemies();
        });

        resetGame();
        gameLoop();
    </script>
</body>
</html>